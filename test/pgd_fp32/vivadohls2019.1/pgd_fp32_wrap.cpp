
#include <stdio.h>
#include "pgd_fp32.hpp"

int main(int argc, char** argv){

	float A[ROW][ROW]={
		{6.46243004334221,-1.21426551501860,-0.127287980199009,-0.673937736863805,-0.357463159126502,1.14279806190071,0.183261668003756,-1.45467383047496,-1.01188508463840,0.0753850148978321,0.474830967652294,0.492358634928037,-0.287649403900107,0.876854812482999,-0.324911805927021,-0.396090332668214},
		{-1.21426551501860,1.98302289639964,-0.886195574216219,0.140231086724284,0.335415889953353,-0.337121799723403,-0.554845296002442,-1.00689216417880,-0.0522940921692834,0.589262223372810,0.139304691320589,-0.240329645416481,0.573598823506858,-0.0197893441350854,0.305247824841453,-0.195475586932846},
		{-0.127287980199009,-0.886195574216219,1.90029783341528,1.41894340090604,0.355153348873195,0.00198266019499546,1.15910939037378,0.925038909040232,0.506689156928013,0.231222077521565,-0.765015691079640,0.151961028875023,-0.610148252371051,-0.515522680549827,-0.207371696326681,-0.118563952773447},
		{-0.673937736863805,0.140231086724284,1.41894340090604,1.83818409637918,-0.0252035275403140,0.310734719387426,0.998630400502642,0.161252259635447,0.674191171315356,0.259388396480536,-0.523526632204280,-0.246633355045573,-0.371337505063907,-0.181596385145756,0.234128440975253,-0.333846833499053},
		{-0.357463159126502,0.335415889953353,0.355153348873195,-0.0252035275403140,1.68981594809474,-1.33685252315484,-0.555856386000563,0.230136555545112,-0.389600534817664,0.432783924518278,-0.961962314491179,0.330784586461225,-0.0255620422834376,-0.204177657290310,0.0926349570665848,-0.242073083058743},
		{1.14279806190071,-0.337121799723403,0.00198266019499546,0.310734719387426,-1.33685252315484,1.39288421915434,0.675148293377620,-0.407453264086210,0.365953796357628,-0.171218417314998,0.488426086634232,-0.262078219970879,0.270068458556395,0.240928965797337,-0.0304217184117155,0.140178827497911},
		{0.183261668003756,-0.554845296002442,1.15910939037378,0.998630400502642,-0.555856386000563,0.675148293377620,1.67709919721977,0.708824544745349,0.380986834422820,-0.101374535629223,-0.0638826398073338,0.0567536948206246,-0.580571133615410,-0.290744847668348,-0.476682476864264,-0.279675165835187},
		{-1.45467383047496,-1.00689216417880,0.925038909040232,0.161252259635447,0.230136555545112,-0.407453264086210,0.708824544745349,1.59979639700778,0.259866555974256,-0.480847848454412,-0.525156361460180,0.254471615203660,-0.440089403541101,-0.412913167284658,-0.286461360354367,-0.0192022394918372},
		{-1.01188508463840,-0.0522940921692834,0.506689156928013,0.674191171315356,-0.389600534817664,0.365953796357628,0.380986834422820,0.259866555974256,0.587298905995375,0.126903620315882,-0.104545330088480,-0.239474247196225,0.177016917132897,-0.292511912214339,0.0448830593766457,0.289434068705995},
		{0.0753850148978321,0.589262223372810,0.231222077521565,0.259388396480536,0.432783924518278,-0.171218417314998,-0.101374535629223,-0.480847848454412,0.126903620315882,1.31132649056714,0.0633127161018746,-0.198881327103834,0.198424490609343,-0.812341448236955,-0.532671304446738,0.847224075401599},
		{0.474830967652294,0.139304691320589,-0.765015691079640,-0.523526632204280,-0.961962314491179,0.488426086634232,-0.0638826398073338,-0.525156361460180,-0.104545330088480,0.0633127161018746,1.32342313140185,-0.000539649711376615,-0.308951435360912,-0.149405690378786,-0.396794670764787,0.274725917473661},
		{0.492358634928037,-0.240329645416481,0.151961028875023,-0.246633355045573,0.330784586461225,-0.262078219970879,0.0567536948206246,0.254471615203660,-0.239474247196225,-0.198881327103834,-0.000539649711376615,1.12545660672504,0.140172620175246,-0.232937576880894,0.00599700817179416,-0.856806961623025},
		{-0.287649403900107,0.573598823506858,-0.610148252371051,-0.371337505063907,-0.0255620422834376,0.270068458556395,-0.580571133615410,-0.440089403541101,0.177016917132897,0.198424490609343,-0.308951435360912,0.140172620175246,1.44920857658112,-0.00541065357624859,0.368971722366384,0.124407428679175},
		{0.876854812482999,-0.0197893441350854,-0.515522680549827,-0.181596385145756,-0.204177657290310,0.240928965797337,-0.290744847668348,-0.412913167284658,-0.292511912214339,-0.812341448236955,-0.149405690378786,-0.232937576880894,-0.00541065357624859,1.07350073360536,0.654891769096636,-0.597318137667490},
		{-0.324911805927021,0.305247824841453,-0.207371696326681,0.234128440975253,0.0926349570665848,-0.0304217184117155,-0.476682476864264,-0.286461360354367,0.0448830593766457,-0.532671304446738,-0.396794670764787,0.00599700817179416,0.368971722366384,0.654891769096636,0.863571764083709,-0.647965621853004},
		{-0.396090332668214,-0.195475586932846,-0.118563952773447,-0.333846833499053,-0.242073083058743,0.140178827497911,-0.279675165835187,-0.0192022394918372,0.289434068705995,0.847224075401599,0.274725917473661,-0.856806961623025,0.124407428679175,-0.597318137667490,-0.647965621853004,1.72268316002748}
	};
	float input[16] = {
		497.176972359546,
		-143.492005916801,
		33.0706259254903,
		-41.8254641215446,
		-17.1497791911096,
		80.6559784880686,
		34.8763913078039,
		-69.0572344261462,
		-71.2332238337275,
		-1.61105981129953,
		17.1724641067358,
		47.8574039829140,
		-39.9985738837616,
		54.8553178482298,
		-35.5277119482273,
		-25.7701008861708
	};
	float output_ref[16] = {
		86.1649813938564,
		-28.2826073510622,
		9.31644068438769,
		-7.67387129389217,
		3.35888076161766,
		10.3572240617886,
		1.66655658053075,
		-10.1822689849252,
		-11.6051478228397,
		3.32822303308616,
		-3.13521445674158,
		8.12383565380051,
		-3.45938707532292,
		7.30989122666081,
		-5.73508321248240,
		0.220327506387070
	};
	float output[16];

	float beta = 1;
	float gamma = 0;
	float lambda = 0.225793927247702;//1.8/7.97187073160452;
    lambda = pgd_f32(A, input, beta, gamma, lambda, output);

	int i;
	for(i=0;i<16;i++){
		printf("output_ref[%d]=%f, output[%d]=%f\n",i,output_ref[i],i,output[i]);
	}

	return 0;

}
